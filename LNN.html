<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Local Nested Notes</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg 
xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' fill='%23000'/%3E%3Cpath d='M6 8h20v2H6zm2 h4h16v2H8zm2 4h12v2h-12zm2 4h8v2h-8z' fill='%23FFA500'/%3E%3C/svg%3E">
    <style>
        :root {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --accent-orange: #FFA500;
            --accent-yellow: #FFD700;
            --border: #444444;
            --hover: #3a3a3a;
            --selected: #4a4a4a;
            --mono-font: 'Courier New', 'Monaco', 'Menlo', monospace;
            --toolbar-height: 48px;
            --header-height: 56px;
        }

        [data-theme="light"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --text-primary: #000000;
            --text-secondary: #333333;
            --border: #cccccc;
            --hover: #e0e0e0;
            --selected: #d0d0d0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body { font-family: var(--mono-font); background: var(--bg-primary); color: var(--text-primary); height: 100vh; overflow: hidden; }

        .app-container { display: flex; height: 100vh; }

        .toolbar { background: var(--bg-secondary); border-bottom: 1px solid var(--border); padding: 8px 16px; display: flex; align-items: center; gap: 16px; position: fixed; top: 0; left: 0; right: 0; z-index: 1000; height: var(--toolbar-height); }
        .toolbar h1 { font-size: 16px; color: var(--accent-orange); }
        .toolbar-buttons { display: flex; gap: 8px; }

        .btn { background: var(--bg-secondary); color: var(--text-primary); border: 1px solid var(--border); padding: 4px 8px; cursor: pointer; font-size: 12px; font-family: var(--mono-font); }
        .btn:hover { background: var(--hover); }
        .btn.accent { background: var(--accent-orange); color: black; }

        .unsaved-indicator { color: var(--accent-yellow); font-size: 12px; }

        .sidebar { width: 300px; background: var(--bg-secondary); border-right: 1px solid var(--border); display: flex; flex-direction: column; margin-top: var(--toolbar-height); /* reserve space for fixed toolbar */ height: calc(100vh - var(--toolbar-height)); }
        .sidebar-header { padding: 12px; border-bottom: 1px solid var(--border); display: flex; flex-direction: column; gap: 8px; }
        .sidebar-header-top { display: flex; justify-content: space-between; align-items: center; }

        .search-input { background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border); padding: 4px 8px; font-family: var(--mono-font); font-size: 12px; width: 100%; }
        .search-input:focus { outline: none; border-color: var(--accent-orange); }
		.search-banner { background: var(--accent-orange); color: black; text-align: center; padding: 4px 8px; font-size: 11px; border-bottom: 1px solid var(--border); }

        .notes-tree { flex: 1; overflow-y: auto; padding: 8px; }

        .note-item { display: block; padding: 6px 12px; cursor: pointer; border: 1px solid transparent; margin: 2px 0; position: relative; }
        .note-item:hover { background: var(--hover); }
        .note-item.selected { background: var(--selected); border-color: var(--accent-orange); }
        .note-item.ctrl-selected { background: var(--accent-yellow); color: black; }
		.note-item.search-matched { background: var(--accent-orange); border: 1px solid var(--accent-orange); }
        .note-item.editable { background: var(--bg-primary); border: 1px solid var(--accent-orange); }

        .note-item input {background: transparent; border: none; outline: none; font-family: var(--mono-font); font-size: inherit; color: inherit; width }

        .collapse-toggle { display: inline-block; width: 12px; height: 12px; margin-right: 4px; cursor: pointer; user-select: none; font-size: 10px; text-align: center; line-height: 12px; }
        .collapse-toggle.empty { visibility: hidden; }
        .drop-zone { height: 4px; background: var(--accent-orange); margin: 2px 0; border-radius: 2px; opacity: 0; transition: opacity 0.2s; }

        .note-content {margin-top: var(--toolbar-height); /* keep below the fixed toolbar */ display: flex; flex-direction: column; height: calc(100vh - var(--toolbar-height)); width: calc(100% - 300px); /* account for sidebar width */ }

        .content-header { padding: 12px; border-bottom: 1px solid var(--border); background: var(--bg-secondary); display: flex; justify-content: space-between; align-items: center; height: var(--header-height); flex: 0 0 auto; box-sizing: border-box; }

        .editor-container { flex: 1 1 auto; display: flex; overflow: auto; height: calc(100% - var(--header-height)); }
        .editor { flex: 1; display: flex; border-right: 1px solid var(--border); position: relative; flex-direction: column; min-width: 260px; }
        .editor:last-child { border-right: none; }
        .editor-textarea { flex: 1 1 auto; background: var(--bg-primary); color: var(--text-primary); border: none; outline: none; padding: 12px; font-family: var(--mono-font); font-size: 12px; line-height: 1.5; resize: none; white-space: pre-wrap; min-height: 120px; }
        .editor-word-count { padding: 6px 12px; font-size: 12px; color: var(--text-secondary); border-top: 1px solid var(--border); background: var(--bg-secondary); text-align: right; flex: 0 0 auto; }

        .line-numbers { background: var(--bg-secondary); color: var(--text-secondary); padding: 12px 8px; font-size: 12px; line-height: 1.5; user-select: none; border-right: 1px solid var(--border); overflow: hidden; white-space: pre; text-align: right; min-width: 40px; }

        .context-menu { position: absolute; background: var(--bg-secondary); border: 1px solid var(--border); box-shadow: 0 2px 8px rgba(0,0,0,0.3); z-index: 2000; min-width: 120px; }
        .context-menu-item { padding: 8px 12px; cursor: pointer; font-size: 12px; }
        .context-menu-item:hover { background: var(--hover); }

        .drag-over { border: 2px dashed var(--accent-orange) !important; background: var(--hover) !important; }
        .modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 3000; }
        .modal-content { background: var(--bg-secondary); padding: 24px; border: 1px solid var(--border); min-width: 300px; }
        .modal input { width: 100%; padding: 8px; margin: 8px 0; background: var(--bg-primary); color: var(--text-primary); border: 1px solid var(--border); font-family: var(--mono-font); }

        @media print {
            .sidebar, .toolbar { display: none !important; }
            .note-content { margin-top: 0 !important; }
            .line-numbers { background: white !important; color: #666 !important; }
            .editor-textarea { background: white !important; color: black !important; }
        }

        @media (max-width: 768px) { .sidebar { width: 250px; } .note-content { width: calc(100% - 250px); } }
    </style>
</head>

<body data-theme="dark">
    <div class="toolbar">
        <h1>üìù Local Nested Notes</h1>
        <div class="toolbar-buttons">
            <button class="btn" onclick="toggleTheme()">üåì Theme</button>
            <button class="btn" onclick="exportData()">üì§ Export</button>
            <button class="btn" onclick="importData()">üì• Import</button>
            <button class="btn" onclick="printNotes()">üñ®Ô∏è Print</button>
        </div>
        <div class="unsaved-indicator" id="unsaved-indicator" style="display: none;">‚óè Unsaved Changes</div>
    </div>

    <div class="app-container">
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-header-top">
                    <span>Notes</span>
                    <button class="btn accent" onclick="addNote()">‚ûï New</button>
                </div>
                <input type="text" class="search-input" id="search-input" placeholder="Search notes..." onkeyup="app.handleSearch(event)">
            </div>
            <div class="notes-tree" id="notes-tree"></div>
        </div>

        <div class="note-content">
            <div class="content-header">
                <span id="content-title">Select a note to edit</span>
                <span id="word-count" style="display: none;"></span>
            </div>
            <div class="editor-container" id="editor-container">
                <div class="editor">
                    <div class="line-numbers" id="line-numbers-1">1</div>
                    <textarea class="editor-textarea" id="editor-1" placeholder="Select a note to start writing..."></textarea>
                    <div class="editor-word-count" id="word-count-editor-1">Words: 0</div>
                </div>
            </div>
        </div>
    </div>

    <input type="file" id="file-input" style="display: none;" accept=".json">

    <script>
        class NestedNotes {
            constructor() {
                this.notes = {};
                this.selectedNotes = [];
                this.draggedNote = null;
                this.hasUnsavedChanges = false;
                this.nextId = 1;
                this.editingNote = null;
                this.collapsedNodes = new Set();
                this.searchTerm = '';
                this.searchMatches = new Set();
                
                this.initializeData();
                this.bindEvents();
                this.render();
                
                // Warn before page refresh
                window.addEventListener('beforeunload', (e) => {
                    e.preventDefault();
                    e.returnValue = 'You have unsaved changes. Data will be lost on refresh. Are you sure?';
                    return e.returnValue;
                });
            }

            initializeData() {
                if (Object.keys(this.notes).length === 0) {
                    this.notes = {
                        1: { id: 1, title: 'Welcome', content: 'Welcome to Nested Local Notes!\n\nThis is a portable note-taking app that works entirely in your browser.\n\nFeatures:\n- Create nested notes\n- Drag and drop to reorder\n- Multiple note viewing (Ctrl+click)\n- Dark/light themes\n- Export/import data\n- Print support\n\nTry creating a new note or editing this one!', parent: null, order: 0 },
                        2: { id: 2, title: 'Getting Started', content: 'Getting started is easy:\n\n1. Click the "‚ûï New Note" button to create notes\n2. Right-click notes for more options\n3. Drag notes to reorder them\n4. Ctrl+click to view multiple notes\n5. Use Export/Import to backup your data\n\nRemember: Data is not saved automatically. Use Export to save your work!', parent: null, order: 1 }
                    };
                    this.nextId = 3;
                    this.selectedNotes = [1];
                }
            }

            bindEvents() {
                document.addEventListener('contextmenu', (e) => {
                    const noteItem = e.target.closest('.note-item');
                    if (noteItem) {
                        e.preventDefault();
                        this.showContextMenu(e, parseInt(noteItem.dataset.noteId));
                    }
                });

                document.addEventListener('click', () => { this.hideContextMenu(); });

                document.getElementById('file-input').addEventListener('change', (e) => {
                    this.handleFileImport(e.target.files[0]);
                });
            }

            markUnsaved() {
                this.hasUnsavedChanges = true;
                document.getElementById('unsaved-indicator').style.display = 'block';
            }

            markSaved() {
                this.hasUnsavedChanges = false;
                document.getElementById('unsaved-indicator').style.display = 'none';
            }

            addNote(parentId = null) {
                const title = prompt('Enter note title:', `Note ${this.nextId}`);
                if (!title) return;

                const note = {
                    id: this.nextId++,
                    title,
                    content: '',
                    parent: parentId,
                    order: Object.values(this.notes).filter(n => n.parent === parentId).length
                };

                this.notes[note.id] = note;
                this.selectedNotes = [note.id];
                this.markUnsaved();
                this.render();
            }

            deleteNote(noteId) {
                if (!confirm('Delete this note and all its children?')) return;

                const deleteRecursive = (id) => {
                    Object.values(this.notes).filter(n => n.parent === id).forEach(child => {
                        deleteRecursive(child.id);
                    });
                    delete this.notes[id];
                };

                deleteRecursive(noteId);
                this.selectedNotes = this.selectedNotes.filter(id => id !== noteId);
                this.markUnsaved();
                this.render();
            }

            duplicateNote(noteId) {
                const note = this.notes[noteId];
                if (!note) return;

                const newNote = {
                    ...note,
                    id: this.nextId++,
                    title: `${note.title} (Copy)`,
                    order: note.order + 1
                };

                Object.values(this.notes)
                    .filter(n => n.parent === note.parent && n.order > note.order)
                    .forEach(n => n.order++);

                this.notes[newNote.id] = newNote;
                this.markUnsaved();
                this.render();
            }

            renameNote(noteId) {
                const note = this.notes[noteId];
                if (!note) return;
                this.editingNote = noteId;
                this.render();
            }

            finishRename(noteId, newTitle) {
                const note = this.notes[noteId];
                if (note && newTitle && newTitle.trim() !== note.title) {
                    note.title = newTitle.trim();
                    this.markUnsaved();
                }
                this.editingNote = null;
                this.render();
            }

            cancelRename() {
                this.editingNote = null;
                this.render();
            }

            render() {
                this.renderNotesTree();
                this.renderEditors();
            }

            renderNotesTree() {
                const container = document.getElementById('notes-tree');
                container.innerHTML = '';

                Object.values(this.notes)
                    .sort((a, b) => a.order - b.order)
                    .filter(note => note.parent === null)
                    .forEach(note => {
                        this.renderNoteItem(note, container, 0);
                    });
            }

            renderNoteItem(note, container, level) {
                const item = document.createElement('div');
                item.className = 'note-item';
                item.dataset.noteId = note.id;
                item.style.paddingLeft = `${level * 16}px`;

                if (this.selectedNotes.includes(note.id)) {
                    if (this.selectedNotes.length > 1) item.classList.add('ctrl-selected');
                    else item.classList.add('selected');
                }
				
				if (this.searchMatches.has(note.id)) {
					item.classList.add('search-matched')
				}

                if (this.editingNote === note.id) {
                    item.classList.add('editable');
                    const input = document.createElement('input');
                    input.value = note.title;
                    input.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter') this.finishRename(note.id, input.value);
                        if (e.key === 'Escape') this.cancelRename();
                    });
                    input.addEventListener('blur', () => this.finishRename(note.id, input.value));
                    item.appendChild(input);
                } else {
                    const titleSpan = document.createElement('span');
                    titleSpan.textContent = note.title;
                    item.appendChild(titleSpan);
                }

                const collapseToggle = document.createElement('span');
                collapseToggle.className = 'collapse-toggle';
                const children = Object.values(this.notes).filter(n => n.parent === note.id);
                if (children.length > 0) {
                    const collapsed = this.collapsedNodes.has(note.id);
                    collapseToggle.textContent = collapsed ? '+' : '-';
                    collapseToggle.onclick = (e) => {
                        e.stopPropagation();
                        if (this.collapsedNodes.has(note.id)) this.collapsedNodes.delete(note.id);
                        else this.collapsedNodes.add(note.id);
                        this.render();
                    };
                } else {
                    collapseToggle.classList.add('empty');
                }
                item.insertBefore(collapseToggle, item.firstChild);

                item.onclick = (e) => {
                    e.stopPropagation();
                    if (e.ctrlKey) {
                        if (!this.selectedNotes.includes(note.id)) this.selectedNotes.push(note.id);
                        else this.selectedNotes.splice(this.selectedNotes.indexOf(note.id), 1);
                    } else {
                        this.selectedNotes = [note.id];
                    }
                    this.render();
                };

                item.addEventListener('dragstart', (e) => {
                    this.draggedNote = note;
                    e.dataTransfer.setData('text/plain', '');
                });

                item.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    item.classList.add('drag-over');
                });

                item.addEventListener('dragleave', () => item.classList.remove('drag-over'));

                item.addEventListener('drop', (e) => {
                    e.preventDefault();
                    item.classList.remove('drag-over');
                    const targetId = parseInt(item.dataset.noteId);
                    const target = this.notes[targetId];
                    const dragged = this.draggedNote;
                    if (dragged && dragged.id !== target.id) {
                        if (!this.isDescendant(dragged.id, target.id)) {
                            dragged.parent = target.id;
                            this.markUnsaved();
                            this.render();
                        }
                    }
                    this.draggedNote = null;
                });

                item.setAttribute('draggable', true);
                container.appendChild(item);

                if (!this.collapsedNodes.has(note.id)) {
                    Object.values(this.notes)
                        .filter(n => n.parent === note.id)
                        .sort((a, b) => a.order - b.order)
                        .forEach(child => this.renderNoteItem(child, container, level + 1));
                }
            }

            showContextMenu(e, noteId) {
                let existingMenu = document.querySelector('.context-menu');
                if (existingMenu) existingMenu.remove();

                const menu = document.createElement('div');
                menu.className = 'context-menu';

                const deleteItem = document.createElement('div');
                deleteItem.className = 'context-menu-item';
                deleteItem.textContent = 'Delete';
                deleteItem.onclick = (ev) => { ev.stopPropagation(); this.deleteNote(noteId); };
                menu.appendChild(deleteItem);

                const renameItem = document.createElement('div');
                renameItem.className = 'context-menu-item';
                renameItem.textContent = 'Rename';
                renameItem.onclick = (ev) => { ev.stopPropagation(); this.renameNote(noteId); };
                menu.appendChild(renameItem);

                const duplicateItem = document.createElement('div');
                duplicateItem.className = 'context-menu-item';
                duplicateItem.textContent = 'Duplicate';
                duplicateItem.onclick = (ev) => { ev.stopPropagation(); this.duplicateNote(noteId); };
                menu.appendChild(duplicateItem);

                e.preventDefault();
                menu.style.top = e.pageY + 'px';
                menu.style.left = e.pageX + 'px';
                document.body.appendChild(menu);
            }

            hideContextMenu() {
                const menu = document.querySelector('.context-menu');
                if (menu) menu.remove();
            }

            handleSearch(event) {
                this.searchTerm = event.target.value.toLowerCase();
                this.searchMatches.clear();
                if (this.searchTerm) {
                    Object.values(this.notes).forEach(note => {
                        if (note.title.toLowerCase().includes(this.searchTerm) || note.content.toLowerCase().includes(this.searchTerm)) this.searchMatches.add(note.id);
                    });
                }
                if (this.searchMatches.size > 0) { this.selectedNotes = Array.from(this.searchMatches); } 
				else if (this.searchTerm === '') { const firstNoteId = Object.keys(this.notes)[0]; this.selectedNotes = firstNoteId ? [parseInt(firstNoteId)] : [];
				}
				this.render();
            }

			getSearchInfo(note) {
				if (!this.searchTerm || !this.searchMatches.has(note.id)) return '';
				
				const lines = note.content.split('\n');
				for (let i = 0; i < lines.length; i++) {
					if (lines[i].toLowerCase().includes(this.searchTerm)) {
						return ` | Match on Row ${i + 1}`;
					}
				}
				return '';
			}

            updateLineNumbers(textareaId, lineNumbersId) {
                const textarea = document.getElementById(textareaId);
                const lineNumbers = document.getElementById(lineNumbersId);
                if (!textarea || !lineNumbers) return;
                const lines = textarea.value.split('\n').length || 1;
                let html = '';
                for (let i = 1; i <= lines; i++) html += i + '\n';
                lineNumbers.textContent = html;
            }

            isDescendant(ancestorId, potentialDescendantId) {
                if (!this.notes[potentialDescendantId]) return false;
                let currentParent = this.notes[potentialDescendantId].parent;
                while (currentParent !== null) {
                    if (currentParent === ancestorId) return true;
                    currentParent = this.notes[currentParent].parent;
                }
                return false;
            }

            renderEditors() {
                const container = document.getElementById('editor-container');
                const contentTitle = document.getElementById('content-title');
                const wordCountTop = document.getElementById('word-count');

                if (this.selectedNotes.length === 0) {
                    contentTitle.textContent = 'Select a note to edit';
                    container.innerHTML = '<div class="editor"><div class="line-numbers">1</div><textarea class="editor-textarea" placeholder="Select a note to start writing..."></textarea><div class="editor-word-count">Words: 0</div></div>';
                    wordCountTop.style.display = 'none';
                    return;
                }

                if (this.selectedNotes.length === 1) {
					const note = this.notes[this.selectedNotes[0]];
					let searchInfo = '';
					if (this.searchTerm) {
						const matchCount = this.searchMatches.size;
						searchInfo = ` | ${matchCount} matches for "${this.searchTerm}"`;
					}
					contentTitle.textContent = (note ? note.title : 'Note not found') + searchInfo;
					// ... rest of code
				} else {
					let searchInfo = '';
					if (this.searchTerm) {
						const matchCount = this.searchMatches.size;
						searchInfo = ` | ${matchCount} matches for "${this.searchTerm}"`;
					}
					contentTitle.textContent = `${this.selectedNotes.length} notes selected${searchInfo}`;
					wordCountTop.style.display = 'none';
				}

                container.innerHTML = '';

                this.selectedNotes.forEach((noteId, index) => {
                    const note = this.notes[noteId];
                    if (!note) return;

                    const editor = document.createElement('div');
                    editor.className = 'editor';
					
					if (this.searchTerm && this.searchMatches.has(note.id)) {
						const banner = document.createElement('div');
						banner.className = 'search-banner';
						const lineInfo = this.getSearchInfo(note).replace(' | Match on row ', 'Match on row ');
						banner.textContent = lineInfo;
						editor.appendChild(banner);
					}

                    const lineNumbers = document.createElement('div');
                    lineNumbers.className = 'line-numbers';
                    lineNumbers.id = `line-numbers-${index + 1}`;
                    lineNumbers.style.minWidth = '40px';

                    const textarea = document.createElement('textarea');
                    textarea.className = 'editor-textarea';
                    textarea.id = `editor-${index + 1}`;
                    textarea.value = note.content;
                    textarea.placeholder = `Editing: ${note.title}`;

                    const wc = document.createElement('div');
                    wc.className = 'editor-word-count';
                    wc.id = `word-count-editor-${index + 1}`;
                    const initialCount = note.content.trim() === '' ? 0 : note.content.trim().split(/\s+/).length;
                    const searchInfo = this.getSearchInfo(note);
					wc.textContent = `Words: ${initialCount}`;

                    textarea.oninput = () => {
                        note.content = textarea.value;
                        this.markUnsaved();
                        this.updateLineNumbers(`editor-${index + 1}`, `line-numbers-${index + 1}`);
                        if (this.selectedNotes.length === 1) {
                            const contentText = note.content.trim();
                            const count = contentText === '' ? 0 : contentText.split(/\s+/).length;
                            document.getElementById('word-count').textContent = `Words: ${count}`;
                        }
                        const editorCount = note.content.trim() === '' ? 0 : note.content.trim().split(/\s+/).length;
						const searchInfo = this.getSearchInfo(note);
						wc.textContent = `Words: ${editorCount}`;
                    };

                    const editorRow = document.createElement('div');
                    editorRow.style.display = 'flex';
                    editorRow.style.flex = '1 1 auto';
                    editorRow.appendChild(lineNumbers);
                    editorRow.appendChild(textarea);

                    editor.appendChild(editorRow);
                    editor.appendChild(wc);

                    container.appendChild(editor);

                    setTimeout(() => this.updateLineNumbers(`editor-${index + 1}`, `line-numbers-${index + 1}`), 0);
                });
            }

            exportData() {
                const data = { notes: this.notes, nextId: this.nextId, exportDate: new Date().toISOString() };
                const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `nested-notes-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                this.markSaved();
            }

            importData() {
                document.getElementById('file-input').click();
            }

            handleFileImport(file) {
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const data = JSON.parse(e.target.result);
                        if (data.notes && typeof data.notes === 'object') {
                            if (confirm('This will replace all current notes. Continue?')) {
                                this.notes = data.notes;
                                const ids = Object.keys(this.notes).map(k => Number(k)).filter(n => !Number.isNaN(n)).sort((a,b)=>a-b);
                                this.nextId = data.nextId || (ids.length ? Math.max(...ids) + 1 : 1);
                                this.selectedNotes = ids.length ? [ids[0]] : [];
                                this.markSaved();
                                this.render();
                            }
                        } else {
                            alert('Invalid file format');
                        }
                    } catch (error) {
                        alert('Error reading file: ' + error.message);
                    }
                };
                reader.readAsText(file);
            }

            printNotes() { window.print(); }
        }

        function toggleTheme() {
            const body = document.body;
            const currentTheme = body.getAttribute('data-theme');
            body.setAttribute('data-theme', currentTheme === 'dark' ? 'light' : 'dark');
        }
        function addNote() { app.addNote(); }
        function exportData() { app.exportData(); }
        function importData() { app.importData(); }
        function printNotes() { app.printNotes(); }

        const app = new NestedNotes();
    </script>
</body>
</html>
